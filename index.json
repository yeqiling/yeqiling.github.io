[{"content":"Frida介绍 Frida是一款功能强大的动态插桩工具，广泛用于逆向工程、调试和安全分析。特别是在安卓平台上，Frida能够让我们在不修改目标应用代码的情况下，动态地拦截和修改其行为。这使得Frida成为安全研究员和开发者们的首选工具之一。\nFrida的基本概念 Frida通过在目标进程中注入JavaScript引擎，使我们能够在运行时对应用进行控制和修改。它提供了简单易用的API，让我们可以轻松地编写脚本来hook函数、修改返回值，甚至拦截和篡改数据。\nFrida安卓环境配置 参考下面的Frida相关资料在电脑上安装：\n模拟器（已开启root）：网易mumu模拟器 python3环境：Python pip配置国内源 windows平台Frida环境：windows搭建frida运行环境 需要注意： 1. 使用pip 安装的frida-tools不需要egg文件也可正常使用 2. mumu模拟器的内核是x86,所以使用x86的server，用真机的话，需开启root，并下载相应的架构\n搭建成功后，我们首先连接模拟器\nadb connect 127.0.0.1:7555 推送并开启frida-server\nadb push frida-server /data/local/tmp/ adb shell \u0026#34;chmod 755 /data/local/tmp/frida-server\u0026#34; adb shell \u0026#34;/data/local/tmp/frida-server \u0026amp;\u0026#34; 中转安卓进程\nadb forward tcp:27042 tcp:27042 adb forward tcp:27043 tcp:27043 检查frida-ps\nfrida-ps -R 编写trace_app.py，hook并解析相关进程，核心代码如下\ndevice = frida.get_usb_device(timeout=5) if (args.package): print(\u0026#39;[*] Spawning \u0026#39; + args.package) pid = device.spawn(args.package) print(pid) session = device.attach(pid) parse_hook(args.load) device.resume(pid) else: attach_name = args.attach session = device.attach(attach_name) parse_hook(args.load) print(\u0026#39;\u0026#39;) sys.stdin.read() Frida的基本使用 我们可以编写一个简单的Frida脚本来hook一个应用的函数，例如拦截并打印某个函数的参数：\nJava.perform(function () { var MainActivity = Java.use(\u0026#39;com.example.app.MainActivity\u0026#39;); MainActivity.someFunction.implementation = function (arg) { console.log(\u0026#39;someFunction called with arg: \u0026#39; + arg); return this.someFunction(arg); }; }); 通过命令行运行这个脚本：\nfrida -U -f com.example.app -l script.js --no-pause 举一反三，我们可以Hook系统的函数，修改系统参数，Hook三方App，修改程序逻辑。仅限学习研究！\nFrida与编写模块 我经常使用某款App，但是广告实在是太烦人了，接下来我们以修改三方App广告逻辑为例，学习怎么利用Frida与编写模块。\n整体思路 使用Frida拿到dex 使用jd-ui查看源码，定位修改点 编写修改代码，使用Frida进行测试 编写xposed模块，安装使用 使用Frida拿到dex 首先，在手机上安装对应的App，搭建好对应的Frida环境。\n接着参考hluwa/frida-dexdump工具的文档，把对应App未加密的dex文件拿到本地。\n然后使用apk-tool等相关工具，将上一步的dex文件转化为jar文件。\n查看源码，定位修改点 切换对应的App到指定页面，安装codehasan/Current-Activity查看对应的activity。\n使用jd-jui工具，拖入第一步拿到的jar文件，定位activity下相关的逻辑。这一步比较繁琐和枯燥。\n编写修改代码，使用Frida进行测试 我们经过一些努力，找到了疑似的类和入口，下面编写对应的Frida测试脚本\nJava.perform(function () { // 获取目标类 var FeedAd = Java.use(\u0026#39;com.xxx.xxx.baseproject.ad.model.FeedAd\u0026#39;); // 重写目标方法的实现 FeedAd.isBlocked.implementation = function () { // 设置返回值为true return true; }; }); 运行测试，完美去除\nfrida -U -f com.xxx.xxx -l script.js --no-pause 编写模块，装机使用 参考西米露工程，新建一个安卓项目。\n接着编写对应的Hook代码。\npublic class xxxxAdHook implements IXposedHookLoadPackage { @Override public void handleLoadPackage(XC_LoadPackage.LoadPackageParam lpparam) throws Throwable { // 过滤不必要的应用 if (!lpparam.packageName.equals(\u0026#34;com.xxx.xxx\u0026#34;)) return; // 执行Hook hook(lpparam); } private void hook(XC_LoadPackage.LoadPackageParam lpparam) { // 具体流程 XposedHelpers.findAndHookMethod(\u0026#34;com.xxx.xxx.baseproject.ad.model.FeedAd\u0026#34;, lpparam.classLoader, \u0026#34;isBlocked\u0026#34;, new XC_MethodHook() { @Override protected void beforeHookedMethod(MethodHookParam param) { param.setResult(true); } }); } } 打包安装即可。\n总结 Frida是一款强大且灵活的工具，能够帮助我们深入分析和控制安卓应用的行为。\n对比Xposed框架，Frida框架更加方便快捷，在探索阶段，不需要安装xposed框架，不需要编写Xposed插件，不需要重启手机。\n更多的Frida知识点，可以参考Frida api\n相关学习资料：\nfrida的用法\u0026ndash;Hook Java代码篇 - luoyesiqiu - 博客园 (cnblogs.com)\nCemiuiler/config.gradle at main · Team-Cemiuiler/Cemiuiler (github.com)\nXposed模块开发入门保姆级教程 - 狐言狐语和仙贝的魔法学习记录 (ketal.icu)\nReleases · java-decompiler/jd-gui (github.com)\nDexPatcher/dex2jar: Unofficial dex2jar builds (github.com)\ndex2jar 反编译Multi dex – 哦哦的真实生活 (itstrue.life)\n绕过frida反调试-看雪论坛\n","permalink":"https://yeqiling.github.io/posts/frida%E5%9C%A8%E5%AE%89%E5%8D%93%E7%AB%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E4%B8%8E%E5%BA%94%E7%94%A8/","summary":"Frida介绍 Frida是一款功能强大的动态插桩工具，广泛用于逆向工程、调试和安全分析。特别是在安卓平台上，Frida能够让我们在不修改目标应用代码的情况下，动态地拦截和修改其行为。这使得Frida成为安全研究员和开发者们的首选工具之一。\nFrida的基本概念 Frida通过在目标进程中注入JavaScript引擎，使我们能够在运行时对应用进行控制和修改。它提供了简单易用的API，让我们可以轻松地编写脚本来hook函数、修改返回值，甚至拦截和篡改数据。\nFrida安卓环境配置 参考下面的Frida相关资料在电脑上安装：\n模拟器（已开启root）：网易mumu模拟器 python3环境：Python pip配置国内源 windows平台Frida环境：windows搭建frida运行环境 需要注意： 1. 使用pip 安装的frida-tools不需要egg文件也可正常使用 2. mumu模拟器的内核是x86,所以使用x86的server，用真机的话，需开启root，并下载相应的架构\n搭建成功后，我们首先连接模拟器\nadb connect 127.0.0.1:7555 推送并开启frida-server\nadb push frida-server /data/local/tmp/ adb shell \u0026#34;chmod 755 /data/local/tmp/frida-server\u0026#34; adb shell \u0026#34;/data/local/tmp/frida-server \u0026amp;\u0026#34; 中转安卓进程\nadb forward tcp:27042 tcp:27042 adb forward tcp:27043 tcp:27043 检查frida-ps\nfrida-ps -R 编写trace_app.py，hook并解析相关进程，核心代码如下\ndevice = frida.get_usb_device(timeout=5) if (args.package): print(\u0026#39;[*] Spawning \u0026#39; + args.package) pid = device.spawn(args.package) print(pid) session = device.attach(pid) parse_hook(args.load) device.resume(pid) else: attach_name = args.attach session = device.","title":"frida在安卓端的学习与应用"},{"content":"转载自心灵骇客\n写博客有很多好处，而坏处几乎没有。就像有些例外不能反驳普遍规律一样，写博客也是一样的道理。具体来说，写博客可以带来以下几大好处：\n1. 结交志同道合的朋友 写博客让你有机会认识很多和你有共同兴趣的人。通过博客记录想法和分享观点，你能吸引到同样有思想深度的人。比如我在CSDN上写博客，后来创建了一个Google Groups，大家因为共同的兴趣聚在一起，讨论越来越深入，最终形成了一个活跃的社区。\n2. 书写促进思考 书写是更好的思考。写博客让你有机会整理自己的思路，把思考过程变得清晰。你会发现，很多时候你以为明白的事情，写下来之后会变得更明了。\n3. 教是最好的学 要把一个问题讲清楚，说明你已经完全理解它。写博客让你有机会把复杂的问题简单化，通过解释来加深自己的理解，就像对着小熊讲解问题那样，你会发现很多答案自己也能找出来。\n4. 激发持续学习和思考 写博客需要不断学习和思考，这会促使你保持学习的习惯。如果你没有持续学习的动力，博客就会变成碎碎念，但如果你坚持写有价值的内容，你会发现读者越来越多，这反过来又会激励你持续学习。\n5. 讨论带来反思 通过博客你能和别人交流观点，这会促使你反思自己的思维方式。讨论能让你看到不同的视角，帮助你深入理解问题。\n6. 培养持之以恒的习惯 长期写博客需要坚持，这种坚持会培养你持之以恒的习惯。写博客会成为一种日常，不仅能帮助你记录思考，还能提升你的写作和思维能力。\n7. 个人品牌和简历 一个长期有价值的博客是一份很好的个人简历。它能展示你的思考深度和专业水平，让更多人了解你。虽然未必能像罗永浩那样影响力巨大，但至少能结识更多有价值的人，开阔眼界。\n如何做到长期写一个价值博客 关键是要让自己成为一个持续学习和思考的人，并把这些思考写下来。不要为了写博客而思考，而是因为思考而写博客。当你习惯了这种思维模式，博客就会成为一种自然的表达。\n可能出现的问题及应对方法 1. 担心别人认为没有价值 你的思考和总结总会对一些人有价值。不要因为怕别人认为没价值就不写。写下来不仅是对自己的总结，也是对他人的分享。\n2. 担心想法幼稚或有漏洞 人非圣贤，正因为有漏洞才值得拿出来讨论。被指出问题是改进的机会，不要因为怕被笑话就不写。\n3. 得不到激励 如果你写的是有价值的内容，书写本身就是一种激励。就算没人看，自己总结也是一种成就感。随着时间的推移，你的博客一定会吸引到有共同兴趣的读者。\n4. 写不出来 思考本来就不是急于求成的事。遇到困难的问题，花时间去思考，总能写出有价值的内容。让问题在大脑中停留更长时间，你会发现更多新的东西。\n总之，写博客是一个不断思考和总结的过程。只要坚持下去，你会发现它带来的好处远远超过预期。\n","permalink":"https://yeqiling.github.io/posts/%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%A0%E5%BA%94%E8%AF%A5%E4%BB%8E%E7%8E%B0%E5%9C%A8%E5%BC%80%E5%A7%8B%E5%86%99%E5%8D%9A%E5%AE%A2/","summary":"转载自心灵骇客\n写博客有很多好处，而坏处几乎没有。就像有些例外不能反驳普遍规律一样，写博客也是一样的道理。具体来说，写博客可以带来以下几大好处：\n1. 结交志同道合的朋友 写博客让你有机会认识很多和你有共同兴趣的人。通过博客记录想法和分享观点，你能吸引到同样有思想深度的人。比如我在CSDN上写博客，后来创建了一个Google Groups，大家因为共同的兴趣聚在一起，讨论越来越深入，最终形成了一个活跃的社区。\n2. 书写促进思考 书写是更好的思考。写博客让你有机会整理自己的思路，把思考过程变得清晰。你会发现，很多时候你以为明白的事情，写下来之后会变得更明了。\n3. 教是最好的学 要把一个问题讲清楚，说明你已经完全理解它。写博客让你有机会把复杂的问题简单化，通过解释来加深自己的理解，就像对着小熊讲解问题那样，你会发现很多答案自己也能找出来。\n4. 激发持续学习和思考 写博客需要不断学习和思考，这会促使你保持学习的习惯。如果你没有持续学习的动力，博客就会变成碎碎念，但如果你坚持写有价值的内容，你会发现读者越来越多，这反过来又会激励你持续学习。\n5. 讨论带来反思 通过博客你能和别人交流观点，这会促使你反思自己的思维方式。讨论能让你看到不同的视角，帮助你深入理解问题。\n6. 培养持之以恒的习惯 长期写博客需要坚持，这种坚持会培养你持之以恒的习惯。写博客会成为一种日常，不仅能帮助你记录思考，还能提升你的写作和思维能力。\n7. 个人品牌和简历 一个长期有价值的博客是一份很好的个人简历。它能展示你的思考深度和专业水平，让更多人了解你。虽然未必能像罗永浩那样影响力巨大，但至少能结识更多有价值的人，开阔眼界。\n如何做到长期写一个价值博客 关键是要让自己成为一个持续学习和思考的人，并把这些思考写下来。不要为了写博客而思考，而是因为思考而写博客。当你习惯了这种思维模式，博客就会成为一种自然的表达。\n可能出现的问题及应对方法 1. 担心别人认为没有价值 你的思考和总结总会对一些人有价值。不要因为怕别人认为没价值就不写。写下来不仅是对自己的总结，也是对他人的分享。\n2. 担心想法幼稚或有漏洞 人非圣贤，正因为有漏洞才值得拿出来讨论。被指出问题是改进的机会，不要因为怕被笑话就不写。\n3. 得不到激励 如果你写的是有价值的内容，书写本身就是一种激励。就算没人看，自己总结也是一种成就感。随着时间的推移，你的博客一定会吸引到有共同兴趣的读者。\n4. 写不出来 思考本来就不是急于求成的事。遇到困难的问题，花时间去思考，总能写出有价值的内容。让问题在大脑中停留更长时间，你会发现更多新的东西。\n总之，写博客是一个不断思考和总结的过程。只要坚持下去，你会发现它带来的好处远远超过预期。","title":"为什么你应该从现在开始写博客"}]